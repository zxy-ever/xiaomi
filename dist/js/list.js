"use strict";getList();var flag=!0,sortList=[];function getList(){$.ajax({url:"../lib/seckill.json",dataType:"json",success:function(a){$("#page").Page({totalPages:Math.ceil(a.length/9),liNums:7,activeClass:"activP",firstPage:"首页",lastPage:"末页",prv:"<<",next:">>",hasFirstPage:!0,hasLastPage:!0,hasPrv:!0,hasNext:!0,callBack:function(t){bindhtml(a.slice(9*(t-1),9*t))}}),bindhtml(a.slice(0,9)),sortList=a}})}function bindhtml(t){var a="";t.forEach(function(t){a+='\n                        <li class="clean" data-id="'.concat(t.goods_id,'">\n                            <div class="list_img fl">\n                                <img src="').concat(t.img,'"\n                                    alt="">\n                            </div>\n                            <div class="list_txt fr">\n                                <h4>').concat(t.goods_name,"</h4>\n                                <p>").concat(t.desc,'</p>\n                                <p class="price"><span>').concat(t.goods_price,'</span>元</p>\n                                <a href="javascript:;" id="addCart" data-id="').concat(t.goods_id,'">加入购物车</a>\n                            </div>\n                        </li>\n                        ')}),$(".list_con > ul").html(a)}$(".list_con > ul").on("click","li img",function(){for(var t=$(this).parent().parent().data("id"),a={},i=0;i<sortList.length;i++)if(sortList[i].goods_id==t){a=sortList[i];break}localStorage.setItem("goods_info",JSON.stringify(a)),location.href="./detail.html"}),$(".byPrice").click(function(){flag=!flag,sortList.sort(function(t,a){return!0===flag?t.goods_price-a.goods_price:a.goods_price-t.goods_price}),$("#page").Page({totalPages:Math.ceil(sortList.length/9),liNums:7,activeClass:"activP",firstPage:"首页",lastPage:"末页",prv:"<<",next:">>",hasFirstPage:!0,hasLastPage:!0,hasPrv:!0,hasNext:!0,callBack:function(t){bindhtml(sortList.slice(9*(t-1),9*t))}}),bindhtml(sortList.slice(0,9))}),$(".byTotal").click(function(){getList()}),$(".list_con > ul").on("click","#addCart",function(){var c=$(this).data("id");$.ajax({url:"../lib/seckill.json",dataType:"json",success:function(t){var a=t.find(function(t){return t.goods_id==c});if(localStorage.getItem("cart")){var i=localStorage.getItem("cart"),s=JSON.parse(i),n=s.find(function(t){return t.goods_id==a.goods_id});n?n.pnum++:(a.pnum=1,s.push(a)),localStorage.setItem("cart",JSON.stringify(s))}else{a.pnum=1;var o=[a];localStorage.setItem("cart",JSON.stringify(o))}alert("添加购物车成功"),location.reload()}})});